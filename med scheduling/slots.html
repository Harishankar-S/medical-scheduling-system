<!DOCTYPE html>
<html>
<head>
  <title>Slot Manager</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <header id="main-header"></header>

  <script>
    const role = localStorage.getItem("userRole");
    let links = '';

    if (role === "admin") {
      links = `
        <a href="home.html">Home</a>
        <a href="index.html">Login</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="book.html">Book Appointment</a>
        <a href="slots.html">Manage Slots</a>
        <a href="appointments.html">Appointments</a>
        <a href="doctors.html">Doctors</a>
      `;
    } else if (role === "patient") {
      links = `
        <a href="home.html">Home</a>
        <a href="index.html">Login</a>
        <a href="dashboard.html">Dashboard</a>
        <a href="book.html">Book Appointment</a>
        <a href="doctors.html">Doctors</a>
      `;
    } else {
      links = `<a href="index.html">Login</a>`;
    }

    document.getElementById("main-header").innerHTML = `<nav>${links}</nav>`;
  </script>

  <h2>Manage Time Slots</h2>

  <!-- FILTER SECTION -->
  <div id="slot-filters" style="margin-bottom: 20px;">
    <label for="drspecial">Doctor specialization</label>
    <select name="drspecial" id="drspecial">
      <option value="All">All</option>
      <option value="Orthopedics">Orthopedics</option>
      <option value="Nephrology">Nephrology</option>
      <option value="Psychiatry">Psychiatry</option>
      <option value="Neurology">Neurology</option>
      <option value="Pulmonology">Pulmonology</option>
      <option value="Dermatology">Dermatology</option>
      <option value="Oncology">Oncology</option>
      <option value="Gastroenterology">Gastroenterology</option>
      <option value="Pediatrics">Pediatrics</option>
      <option value="Rheumatology">Rheumatology</option>
      <option value="ENT">ENT</option>
      <option value="Ophthalmology">Ophthalmology</option>
      <option value="Urology">Urology</option>
      <option value="Endocrinology">Endocrinology</option>
      <option value="Cardiology">Cardiology</option>
    </select>

    <label for="doctor">Doctor:</label>
    <select id="doctor" onchange="applySlotFilters()">
      <option value="">All</option>
      <option value="Dr. Amy Chen">Dr. Amy Chen</option>
      <option value="Dr. Raj Patel">Dr. Raj Patel</option>
    </select>

    <label for="slot-date">Date:</label>
    <input type="date" id="slot-date" onchange="applySlotFilters()">

    <button onclick="resetSlotFilters()">Reset</button>
  </div>

  <!-- SLOT TABLE -->
  <table id="slot-table">
    <thead>
      <tr>
        <th>Doctor</th><th>Specialization</th><th>Date</th><th>Time</th><th>Available</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Dr. Amy Chen</td><td>Cardiology</td><td>2025-05-15</td><td>09:00</td><td>Yes</td>
      </tr>
      <tr>
        <td>Dr. Raj Patel</td><td>Dermatology</td><td>2025-05-15</td><td>09:30</td><td>No</td>
      </tr>
      <tr>
        <td>Dr. Amy Chen</td><td>Cardiology</td><td>2025-05-16</td><td>10:00</td><td>Yes</td>
      </tr>
      <tr>
        <td>Dr. Raj Patel</td><td>Dermatology</td><td>2025-05-15</td><td>10:15</td><td>Yes</td>
      </tr>
    </tbody>
  </table>

  <script>
    function applySlotFilters() {
      const specialization = document.getElementById("specialization").value.toLowerCase();
      const doctor = document.getElementById("doctor").value.toLowerCase();
      const date = document.getElementById("slot-date").value;

      const rows = document.querySelectorAll("#slot-table tbody tr");

      rows.forEach(row => {
        const docName = row.cells[0].textContent.toLowerCase();
        const spec = row.cells[1].textContent.toLowerCase();
        const slotDate = row.cells[2].textContent;

        let visible = true;

        if (specialization && spec !== specialization) visible = false;
        if (doctor && docName !== doctor) visible = false;
        if (date && slotDate !== date) visible = false;

        row.style.display = visible ? "" : "none";
      });
    }

    function resetSlotFilters() {
      document.getElementById("specialization").value = "";
      document.getElementById("doctor").value = "";
      document.getElementById("slot-date").value = "";

      applySlotFilters();
    }
  </script>

</body>
</html>
